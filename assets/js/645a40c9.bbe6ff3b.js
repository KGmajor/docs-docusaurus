"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2920],{9613:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>h});var n=r(9496);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},d=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=l(r),m=a,h=u["".concat(c,".").concat(m)]||u[m]||p[m]||o;return r?n.createElement(h,i(i({ref:t},d),{},{components:r})):n.createElement(h,i({ref:t},d))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},4681:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var n=r(7605),a=(r(9496),r(9613));const o={},i="Stream Lifecycle",s={unversionedId:"protocol/js-ceramic/streams/lifecycle",id:"protocol/js-ceramic/streams/lifecycle",title:"Stream Lifecycle",description:"Write Lifecycle",source:"@site/docs/protocol/js-ceramic/streams/lifecycle.md",sourceDirName:"protocol/js-ceramic/streams",slug:"/protocol/js-ceramic/streams/lifecycle",permalink:"/docs-docusaurus/docs/protocol/js-ceramic/streams/lifecycle",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"protocol",previous:{title:"Consensus",permalink:"/docs-docusaurus/docs/protocol/js-ceramic/streams/consensus"},next:{title:"Accounts",permalink:"/docs-docusaurus/docs/protocol/js-ceramic/accounts/accounts-index"}},c={},l=[{value:"Write Lifecycle",id:"write-lifecycle",level:2},{value:"Create",id:"create",level:3},{value:"Update",id:"update",level:3},{value:"Read Lifecycle",id:"read-lifecycle",level:2},{value:"Query",id:"query",level:3},{value:"Sync",id:"sync",level:3},{value:"Durability",id:"durability",level:2},{value:"Maintenance",id:"maintenance",level:3}],d={toc:l},u="wrapper";function p(e){let{components:t,...r}=e;return(0,a.kt)(u,(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"stream-lifecycle"},"Stream Lifecycle"),(0,a.kt)("h2",{id:"write-lifecycle"},"Write Lifecycle"),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"create"},"Create"),(0,a.kt)("p",null,"A stream is created when an ",(0,a.kt)("a",{parentName:"p",href:"/docs-docusaurus/docs/protocol/js-ceramic/streams/event-log"},"Init Event")," is created and published. The stream is then uniquely referenced in the network by its ",(0,a.kt)("a",{parentName:"p",href:"/docs-docusaurus/docs/protocol/js-ceramic/streams/uri-scheme"},"StreamId"),", which is derived from this Init Event. "),(0,a.kt)("h3",{id:"update"},"Update"),(0,a.kt)("p",null,"Updates to a stream include the creating and publishing of data events or timestamp events. When creating these events they must reference the latest event or tip in the stream. The latest event, if there is multiple, is determined by locally following the conflict resolution and ",(0,a.kt)("a",{parentName:"p",href:"/docs-docusaurus/docs/protocol/js-ceramic/streams/consensus"},"consensus rules"),". The current update protocol is described further ",(0,a.kt)("a",{parentName:"p",href:"/docs-docusaurus/docs/protocol/js-ceramic/networking/tip-gossip"},"here"),". "),(0,a.kt)("p",null,"The data event is a signed event and is expected to be created and published by the controller of the given stream it is being appended. A timestamp event on the other hand can be created by any participant in network, given that it is a valid timestamp proof. Typically in the Ceramic network they will be created and published by a timestamping service. "),(0,a.kt)("h2",{id:"read-lifecycle"},"Read Lifecycle"),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"query"},"Query"),(0,a.kt)("p",null,"The network can be queried to discover the latest tips for any stream by StreamId. Knowing both the StreamId and tip then allows any node to sync the stream. Query requests are broadcast to the entire network to discover peers that have tips for any given stream. Future query protocols can be optimized and include other stream attributes and values to discover streams and stream tips. The current query protocol is described further ",(0,a.kt)("a",{parentName:"p",href:"/docs-docusaurus/docs/protocol/js-ceramic/networking/tip-queries"},"here"),". "),(0,a.kt)("h3",{id:"sync"},"Sync"),(0,a.kt)("p",null,"Streams can be synced and loaded by knowing both the StreamId and the latest event (tip). Given the latest tip you can traverse the stream event log from event to event in order until the Init Event is reached. Each event is loaded from peers in the network, any peer with a tip is expected to have the entirety of the event stream log. The current sync protocol is described further ",(0,a.kt)("a",{parentName:"p",href:"/docs-docusaurus/docs/protocol/js-ceramic/networking/event-fetching"},"here"),"."),(0,a.kt)("h2",{id:"durability"},"Durability"),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"maintenance"},"Maintenance"),(0,a.kt)("p",null,"A stream is a set of ",(0,a.kt)("a",{parentName:"p",href:"/docs-docusaurus/docs/protocol/js-ceramic/streams/event-log"},"events")," and these events are stored in IPFS nodes. As long as the entire set of events is pinned and advertised on the IPFS DHT, the respective stream will be retrievable. If your application depends on a stream remaining available, it is your application's responsibility to maintain and store all of its events. This can be done by running your own IPFS nodes or by using an IPFS pinning service. Typically you will be running an IPFS node with Ceramic. "),(0,a.kt)("p",null,"If any events are not available at a given time, it is not a guarantee that the stream has been deleted. A node with a copy of those events\nmay be temporarily offline and may return at some future time."),(0,a.kt)("p",null,"Other nodes in the network can pin (maintain and store) events from your streams or anyone else's streams. If you suffer a data loss, some other node MAY have preserved your data. Popular streams and their events are likely to be stored on many nodes in the network."))}p.isMDXComponent=!0}}]);